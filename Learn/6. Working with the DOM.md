# Working with the Document Object Model (DOM) in JavaScript

In this course, you learn about:

- HTML and DOM
- Nodes and Elements
- Querying DOM Nodes and Traversing the DOM
- Evaluating and Manipulating DOM Nodes
- Creating and Removing DOM Nodes

## `document` and `window`

You can access your **HTML** skeleton by `ducument`. For example:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOM Interaction</title>
  <script src="app.js" defer></script>
</head>
<body>


</body>
</html>
```

We can aslo use `console.dir(document)`.  The `console.dir()` displays an interactive list of the properties of the specified **JavaScript** object. In other words, `console.dir()` is the way to see all the properties of a specified **JavaScript** object in console by which the developer can easily get the properties of the object:

```js
console.dir(document);
```

Now we get access to real **JavaScript** object with all the properties that are in there and you see, there are a lot of properties in there.

`document` element here is basically our entire **HTML** content. So, the `body` gives us access to everything that was rendered in that body part, **HTML** holds everything that was rendered to set up for our entire HTML code which was rendered.

We also can type `window` here (console) and we get access to the window object. This is that real topmost object and this gives us access to all the core APIs that the browser wants to expose to us (like `alert()`, `prompt()`, `print()`, `blur()` and so on).

Actually browsers always parse our **JavaScript** code such that `window.` is automatically added in front of some function if that function can't be found anywhere else. So the browser always looks in the `window` object if we're calling or accessing something, which is like `alert()` would work here, so that's really great. For example:

```js
alert("Hey");
// or
window.alert("Hey");
```

![DOM](https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/DOM-model.svg/1200px-DOM-model.svg.png)

## Small theory of `document` and `window`

**document**:

- Root DOM Node
- Provides access to element querying, DOM content etc.

**window**:

- The active Browser Window / Tab
- Acts as global storage for script, also provides access to window- specific properties and methods

## Element and Node

We can use in our HTML documents which are understood by the browser and which will be rendered to the screen. Browser renders all the pixels. For example, the `html` tag is translated to an `HTML` node.

Text node: The whitespaces in HTML file is also is **node**. Most whitespaces is actually not rendered but it is part of the that DOM tree. But of course, also the normal text is part of the DOM as **text node**. Text is indeed stored as objects but as a different kind of object, as a **text nodes** with different properties and different methods. So we have to type of node, 1. text node, 2. element node.

You can see your HTML elements in `developer tools` in browser, in **Elements** tab. You can also press `ctrl+shift+c` to use slecetion mode (or cursor icon in developer tools).

**Note**: `$0` always gives you access to the **last element you selected** in the `Elements` tab.

A Summary of describing `element` and `node`:

|Node|Element|
|:-:|:-:|
|The objects that make up the DOM|Special properties and methods to interact with the elements|
|HTML tags are **element nodes** (or just **elements**)|Available methods and properties depend on the kind of element|
|Text creates **text nodes**|Can be selected in various different ways (via **JavaScript**)|
|Attributes create **attribute nodes**|Can be created and removed via **JavaScript**|

**Note**: Elements are one type of nodes.

More information from Node Type: [Click here](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)

## Querying Elements

We have some different ways for querying elements, for example:

- `querySelector()`
- `querySelectorAll()`
- `getElementById()`
- `getElementByClassName()`
- `getElementByTagName()`
- and etc.

DOM nodes are just **JavaScript Object** in the end - i.e. **reference values**.These methods **return the object references (addresses)

> `querySelector()`, `getElementById()`

- Return single elements
- Differents ways of querying elements (by CSS selector, by ID)
- Direct reference to DOM elements is returned

> `querySelectorAll()`, `getElementByTagName()`, ...

- Returns collections of elements (array-like objects): NodeList
- Different ways of querying elements (by CSS selector, by tag name, by CSS class)
- `querySelectorAll()` returns a non-live NodeList, getXByY return live NodeLists

## Selecting Elements in the DOM

As you learned from the **Querying Elements** section, we want make some example:

Querying elements by class and id:

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOM Interaction</title>
  <script src="app.js" defer></script>
</head>

<body>
  <header>
    <h1 id="main-title">Dive into the DOM!</h1>
  </header>
  <ul>
    <li class="list-item">list1</li>
    <li class="list-item">list2</li>
    <li class="list-item">list3</li>
  </ul>
  <script>
    document.getElementById(`main-title`); // gets this `h1` element
    document.getElementByClassName(`main-title`); // gets these `li` elements
  </script>
</body>

</html>
```

If you want find (select) the first matching items (elements) in class (and etc.), you use to use `querySelector()` for return to first matching item:

```js
document.querySelector('.list-item');
// <li class="list-item">list1</li>
```

If you have all matching items you use `document.querySelectorAll()` and then enter your CSS selector in there:

```js
document,querySelectorAll('.list-item');
// NodeList(3) [li.list-item, li.list-item, li.list-item]
// 0: li.list-item
// 1: li.list-item
// 2: li.list-item
// length: 3
// __proto__: NodeList
```

You can use different ways for `querySelector()`, for example:

```js
// selects first element match
document.querySelectorAll('ul li:first-of-type');
// <li class="list-item">list1</li>

// selects last element match
document.querySelectorAll('ul li:last-of-type');
// <li class="list-item">list3</li>
```

You can also store them into variable:

```js
const ul = document.querySelector('ul');
<li class="list-item">list1</li>
// <li class="list-item">list1</li>
```

## Summary of DOM

Here's a summary of the various methods you got to reach out to DOM elements (you can only query for element nodes).

Besides the below query methods, you also got these special properties on the `document` object to select parts of the document:

- `document.body` => Selects the `<body>` element node.
- `document.head` => Selects the `<head>` element node.
- `document.documentElement` => Selects the `<html>` element node.

> Query Methods

- `document.querySelector(<CSS selector>)`

  Takes any CSS selector (e.g. `'#some-id'`, `'.some-class'` or `'div p some-class'`) and returns the first (!) matching element in the DOM. Returns `null` if no matching element could be found.

  More information about `document.querySelector()`: <https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector>

- `document.getElementById(<ID>)`

  Takes an ID (**without `#`**, just the id name) and returns the element that has this `id`. Since the same ID shouldn't occur more than once on your page, it'll always return exactly that one element. Returns `null` if no element with the specified ID could be found.

  More information about `document.getElementById(<ID>)`: <https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById>

- `document.querySelectorAll(<CSS selector>)`

  Takes any CSS selector (e.g. `'#some-id'`, `'.some-class'` or `'div p.some-class'`) and returns all matching elements in the DOM as a static (non-live) NodeList. Returns and empty NodeList if no matching element could be found.

  More information about `document.querySelectorAll(<CSS selector>)`: <https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll>

- `document.getElementsByClassName(<CSS CLASS>)`

  Takes a CSS class (**without `.`**, just the class name, e.g. `'some-class'`) and returns a live HTMLCollection of matched elements in your DOM. Returns an empty HTMLCollection if not matching elements were found.

  More information about `document.getElementsByClassName(<CSS CLASS>)`: <https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName>

- `document.getElementsByTagName(<HTML TAG>)`

  Takes an HTML tag (e.g. `'p'`) and returns a live HTMLCollection of matched elements in your DOM. Returns an empty HTMLCollection if not matching elements were found.

  More information about `document.getElementsByTagName(<HTML TAG>)`: <https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName>

There also is the `getElementsByName()` method which really isn't used commonly (<https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName>).

## Evaluating and Manipulating DOM Nodes (Elements)

Consider:

```html
<h1 id="main-title">Dive into the DOM!</h1>
```

We can access all properties and attributes in HTML `tag`. For example:

```js
const h1 = document.querySelector('h1');
h1.textContent; // "Dive into the DOM!"
h1.textContent = "Some new text!"; // "Some new text!"

h1.className; // ""
h1.className = "title"; // <h1 id="main-title" class="title">Dive into the DOM!</h1>

h1.id; // "main-title"
h1.id = "new-title"; // <h1 id="new-title" class="title">Dive into the DOM!</h1>
```

We also can access the CSS properties by `style`:

```js
const h1 = document.querySelector('h1');
h1.style.color; // ""
h1.style.color = "white"; // color: white;

h1.style.backgroundColor; // ""
h1.style.backgroundColor = "red"; // background-color: red;
```

We would recommend that you absolutely use `console.dir(h1)` (or other elements), because whilst there are many things which you won't fully understand yet. There are many things which you will understand.

**Note**: Whatever you change here (in browser console), in **JavaScript**, will be lost whenever you reload the page, because what you do in **JavaScript** is only stored in memory. If you reload the page, you load these original files again and your **JavaScript** changes are lost. Because whenever you reload the page, this essentially resets your **JavaScript** application, it clears the existing application from the memory in the end and starts a brand new application. So your **JavaScript** file is parsed again and any changes you made are not kept around.

## Attributes vs Properties

When the browser loads the page, it **reads** (another word: **parses**) the HTML and generates DOM objects from it. For element nodes, most standard HTML attributes automatically become properties of DOM objects.

For instance, if the tag is `<body id="page">`, then the DOM object has `body.id="page"`.

But the attribute-property mapping is **not one-to-one**! In this chapter we’ll pay attention to separate these two notions, to see how to work with them, when they are the same, and when they are different.

- Attributes: Is what’s written in HTML
- Properties: Is what’s in DOM objects

Methods to work with **attributes** are:

- `element.hasAttribute(name)`: To check for existence.
- `element.getAttribute(name)`: To get the value.
- `element.setAttribute(name, value)`: To set the value.
- `element.removeAttribute(name)`: To remove the attribute.
- `element.attributes` is a collection of all attributes.

We have a lot of attributes. You can take a look in [this](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes) site.

> Summary:

Often (but not always!), **attributes** are mapped to **properties** and **live synchronization** is set up. Consider:

```html
<input id="input-1" class="input-default" value="Enter text...">
```

`id="input-1"`, `class="input-default"` and `value="Enter text..."` are attribute placed in HTML code, on element tags.

These are properties:

```js
const input; // read below
```

- 1:1 mapping (+ live-sync) => `input.id`
- Different names (but live-sync) => `input.className`
- 1:1 mapping (1-way live-sync) => `input.value`

Properties automatically added on created DOM objects.

Let's do a mini project:

```html
<!-- HTML content -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOM Interaction</title>
  <script src="app.js" defer></script>
</head>

<body>
  <button id="start-btn">Click me!</button>
  <header>
    <h1 id="main-title">Dive into the DOM!</h1>
  </header>
  <ul>
    <li class="list-item">list1</li>
    <li class="list-item">list2</li>
    <li class="list-item">list3</li>
  </ul>
</body>

</html>
```

```js
// JavaScript code
const startBtn = document.getElementById("start-btn");
const h1 = document.getElementById(`main-title`);
const allLis = document.getElementsByTagName("li");
const lastLi = document.querySelector(`.list-item:last-of-type`);

const start = () => {
  for (const li of allLis) {
    console.log(li);
  }

  h1.textContent = "We changed you, Sorry!";
  h1.style.color = "white";
  h1.style.backgroundColor = "black";

  lastLi.textContent = lastLi.textContent + " Changed";
};

startBtn.addEventListener("click", start);
```
